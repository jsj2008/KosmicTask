#
# Created by {{ author }} on {% now | date_format: "dd MMM yyyy HH:mm:ss" %}
#
# Credits:
#
# Notes: 
#
# the number of task arguments is:
# $numArgs = $#ARGV + 1;
#
# task arguments are accessed as:
# $ARGV[0] .. $ARGV[$numArgs]
# 

use warnings;

# capture screen image to file
# files created in the current directory will be deleted when the task ends
$FILES="";

for ($i = 1; $i <= 5; $i++) {
	
	if ($i > 1) {
		$FILES = $FILES." , ";
	}
	
	# filename
	$FILE = "capture-$i.png";
	
	# log command
	print STDERR "Running screencapture command...\n";

	# capture screen
	`screencapture -t png $FILE`;

	# add to files list
	$FILES = "$FILES $FILE";
	
	# log wait
	print STDERR "Waiting...\n";

	sleep 1;
}

# return a YAML inline format dictionary with array of file names
print "--- {kosmicFile: [$FILES], kosmicInfo: file returned}";
